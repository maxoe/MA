% !TeX root = thesis.tex
%% related_work.tex
%%

%% ==============
\chapter{Related Work\label{ch:related_work}}
%% ==============
The planning of breaks on a route in a routing or scheduling context has been studied beforehand. The introduction of regulation EC 561/2006 of the European Union \cite{europeanparliament:2006} which regulates driving and rest times has led to the work of \cite{goel:2009a} who introduce a model for the regulation in the context of the Truck Driver Scheduling Problem (TDSP) which they solve using a label propagation algorithm. In the TDSP, a schedule must be found to visit multiple customers with given distances between them. Each customer must be visited in a given time window. The authors revisit the TDSP in later publications, addressing regulations of different countries, such as the US \cite{goel:2012c}. The authors of \cite{sartori:2022} also address the TDSP and name the respective variants EU-TDSP for the EU and US-TDSP for the US. All variants have in common that breaks must be taken on a route in regular intervals. In \cite{goel:2012b}, the authors introduce the Minimum Duration Truck Driver Scheduling Problem (MD-TDSP) which aims to find a valid truck driver schedule with a minimal total duration while breaks can only be taken at customers and specified rest areas. The problem is solved using mixed-integer linear programming (MILP). The Truck Driver Scheduling and Routing Problem (TDSRP) presents an extension of the TDSP and has been studied with slightly varying definitions. The work of \cite{shah:2008} solves a time-dependent version of the TDSRP heuristically and allows breaks on every node, there are no dedicated parking nodes. The Bachelor's thesis of \cite{braeuer:2016} aims to solve the problem with an exact algorithm but fails to present an algorithm with practicable running time. A heuristic version of the approach achieves running times under a minute. The dissertation of \cite{kleff:2019}, which also addresses the TDSP, extends this work and presents an exact algorithm and a heuristic for the TDSRP. They allow parking only at dedicated nodes in the network for which they introduce the term \emph{no-break-en-route policy}. The number of breaks between customers is limited to one break. The master's thesis of \cite{bomsdorf:2020} targets the TDSRP with no-break-en-route-policy in its non-time-dependent version. They restrict the number of types of driving time constraints to two (TDSRP-2B) and provide an exact solution using MILP and, additionally, a heuristic approach. The exact solution fails to provide practical running times and the heuristic approach still suffers from long-running times in realistic scenarios. They also briefly present an extension to solve a time-dependent variant of the problem (TD-TDSRP-2B). The TDSRP-2B, in contrast to the TDSP, is already related to the long-haul truck driver routing problem (LH-TDRP) of our work. The LH-TDRP closely resembles the problem of routing between customers in the TDSRP-2B with regard to parking areas (no-breaks-en-route-policy) and driving time constraints. The work of \cite{mayerle:2020} addresses a variant of the truck driver scheduling problem with intermediate stops (VRTDSPIS). The VRTDSPIS resembles a combined routing and scheduling problem similar to the TDSRP, the intermediate stops in this work consist of taking a break due to regulatory constraints or refueling. The sequence of customers is not predetermined, only start and destination are given. The authors differentiate between the four types of breaks rest, meal, overnight, and weekly break. A break of a certain type must fit the infrastructure of the stop location. The problem is formulated as a mixed-integer linear program and using a state-space graph model and solved using a Dijkstra-based algorithm. The authors' goal is to use the approach to enable analysis of the effects of changes in HOS regulations for different stakeholders, e.g., the analysis of the economic impact for policy-makers. They conduct a brief case study in which they use their approach to analyze significant regulatory changes in Brazil.

The LH-TDRP itself or variations of it were also addressed in previous work, although using different terminology. The work of \cite{kleff:2017} restricts the LH-TDRP by only allowing one break on a route, but includes traffic predictions using time-dependent road networks. It uses a version of core contraction hierarchies where all the parking nodes are part of the core, which we will revisit later in this work. The authors of \cite{tuin:2018} also allow only one break on a route and combine their approach with temporary driving bans and road closures. First, they introduce a multi-label version of Dijkstra's algorithm. Second, they present a heuristic version using time-dependent CH with an improved running time in comparison.

Other publications address different complex real-world scenarios which present an extension to the shortest path problem (SPP). As in this work, most of them strive to integrate the additional requirements into contraction hierarchies (CH) or other speed-up techniques which exploit the hierarchy of road networks \cite{bast:2016}. In \cite{kleff:2020b}, the authors address temporary driving bans and road closures which leads to a different scenario in which parking on a route becomes important. In this scenario, it may occur that a driver has to wait for a driving ban or a road closure to be lifted. This waiting time shall be spent at a designated parking location and not en-route. The necessary number of breaks on a route arises from the road network and query, therefore the authors do not restrict the number of possible breaks on a route as done in other publications. The work also includes a rating of parking areas. It therefore searches for pareto-optimal solutions with regard to travel time and ratings of the used parking areas. The approach is too slow to be used in practice, but it uses a combination of the A* algorithm and CH-Potentials which we also will revisit later. Integrating traffic predictions, respectively time-dependent road networks with CH is addressed by \cite{batz:2010,batz:2013}. Turn costs are addressed by \cite{geisberger:2011}. Mitigating the complex task of integrating additional information into a CH is addressed by \cite{strasser:2021b} by building a tight potential based on CH which then is used in combination with the A* algorithm. They use the same principle to address live traffic and extend the CH variant to a customizable contraction hierarchy \cite{dibbelt:2016} to address temporary driving bans.


\section{Drivers' Working Hours Regulations of the European Union\label{sec:dwh_eu}}
The following rules originate from the aforementioned regulation EC 561/2006 of the European Union \cite{europeanparliament:2006} and govern drivers of HGV and passenger vehicles with more than nine seats. According to the regulation, a driver spends any given time period with a break, rest, driving or ``other work''. A break is a period of time in which the driver is not driving. A rest is a period of time in which the driver is free to spend his time as he wishes. A driver spends time with other work if he is not driving but conducting other work-related activities.

A driver must take a break of at least \SI{45}{\minute} after \SI{4.5}{\hour} of driving. The break must not necessarily be taken en-bloc, it can be split into a first break of at least \SI{15}{\minute} and a second break of at least \SI{30}{\minute}. The second break must take place before the driver exceeds the \SI{4.5}{\hour} of accumulated driving time.

The regulation mandates daily and weekly rest periods. A daily rest period lasts at least \SI{11}{\hour}. Similar to a break, the daily rest period can be split into a first period of \SI{3}{\hour} and a second period of \SI{9}{\hour}. It is allowed to reduce this daily rest period to \SI{9}{\hour}, but this must occur at most three times per week. A weekly rest period must consist of at least \SI{45}{\hour} of rest. It can be reduced to a time of at least \SI{24}{\hour} if there is never more than one reduced weekly rest period in any two consecutive weeks. After having completed a weekly rest period, the next weekly rest period must begin within six cycles consisting of driving and a daily rest period.

Additionally, driving is restricted to a maximum of \SI{9}{\hour} per day. This can be extended to \SI{10}{\hour} twice a week. The maximum allowed driving time within a week is \SI{56}{\hour} and the driving time in two consecutive weeks must not exceed \SI{90}{\hour}. The regulation regarding drivers's working hours does not apply in some exceptions, e.g., if the vehicle's maximum authorized speed is at most \SI[per-mode = symbol]{40}{\kilo\meter\per\hour} or if the truck carries equipment and machinery, does not leave a \SI{100}{\kilo\meter} radius from the base, and driving is not the main activity of the person who is driving.

Truck drivers are also affected by the EU's working time regulations of directive 2002/15/EC \cite{europeanparliament:2002}. Working time includes driving and other work. It must not exceed an average of \SI{48}{\hour} per week which is calculated using a rolling window which spans 17 weeks. The maximum allowed working time in a single week is \SI{60}{\hour}. Breaks must be taken at least every \SI{6}{\hour} for a time period of \SI{15}{\minute}. If the total working time exceeds \SI{6}{\hour}, this time period increases to \SI{30}{\minute} and if it exceeds \SI{9}{\hour}, it increases to \SI{45}{\minute}. In any case, the drivers' working hours rules of EC 561/2006 take precedence over the working time rules if the truck driver is carrying out driving and the working rules would allow a longer time until the next break. The regulations regarding daily and weekly rest periods are the same for drivers' working hours and working time.

\section{Hours of Service Regulations of the United States\label{sec:hos_us}}
The US HOS regulations \cite{federalmotorcarriersafetyadministrationfmcsa:2011} govern both ``property-carrying drivers'' (truck drivers) and ``passenger-carrying drivers'' for whom the mandatory break times, off-duty times, and maximum allowed on-duty times differ. In the following, we only describe the HOS regulations for ``property-carrying drivers''. The legal text uses different terminology compared to the EU regulations regarding the classification of time periods. Time periods are classified as driving, ``on-duty not driving'', ``off-duty'', or sleeper berth. Driving has the same meaning as in the EU regulations, ``on-duty not driving'' corresponds to ``other work'', and ``off-duty'' means resting. The sleeper berth is only addressed by the US HOS regulations.

A driver must take a break of at least \SI{30}{\minute} after having accumulated \SI{8}{\hour} of driving time without a break in between. The conditions for a break are satisfied if the driver carries out any action except driving for at least \SI{30}{\minute} without interruption. Further, the regulations differentiate between a \SI{11}{\hour} \emph{driving} limit and a \SI{14}{\hour} limit. The former limits the allowed driving time to at most \SI{11}{\hour} if the driver was off-duty for at least \SI{10}{\hour} without interruption. The latter mandates that at most \SI{14}{\hour} may pass after the driver has come on-duty, until the driver must spend an uninterrupted time of at least \SI{10}{\hour} off-duty. Essentially, a driver's work day can last at most \SI{14}{\hour} of which at least \SI{3}{\hour} must be spent with other work than driving and the work day must be followed by \SI{10}{\hour} of rest. If a driver encounters adverse driving conditions, both limits are extended by at most \SI{2}{\hour}. Adverse driving conditions include bad weather, such as fog or snow, and unusual traffic. The exception does not apply if the conditions where known at the beginning of the on-duty time and the driver has spent a time off-duty before which was long enough to qualify for on of the limits above.

The US also limit weekly on-duty hours. When driving on every day of the week, the total time period spent on-duty is limited to \SI{70}{\hour} over 8 days. Otherwise, it is limited to \SI{60}{\hour} over 7 days. In both cases, the time on-duty must be followed by at least \SI{34}{\hour} off-duty.

A specialty of the US HOS regulations in comparison to the EU regulations is the sleeper berth provision. The driver is allowed to split the \SI{10}{\hour} off-duty time, which is mandated by the \SI{11}{\hour} and \SI{14}{\hour} limits, into two parts. One part must be at least \SI{2}{\hour} long while the other part must last for at least \SI{7}{\hour} and must be spent in the truck's sleeper berth. Additionally, the length of both parts must add up to at least \SI{10}{\hour}.

